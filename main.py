import telebot
import random

# Укажите токен вашего Telegram бота
API_TOKEN = '##############################################'
bot = telebot.TeleBot(API_TOKEN)

# Списки анекдотов
regular_jokes = [
    "Почему программисты не ходят в лес? Там слишком много корней.",
    "Как программист называет себе обед? break().",
    "Почему программисты носят очки? Чтобы видеть четкий код.",
    "Почему программисты любят зиму? Потому что холодный код работает быстрее.",
    "Что говорит программист, увидев красивый закат? 'Какая реалистичная палитра RGB!'.",
    "Что делает программист на выходных? Коммитит себя на диван.",
    "Почему у программиста никогда не заканчиваются идеи? Потому что у него бесконечный цикл.",
    "Как программист называет обеденный перерыв? break();",
    "Почему программисты не любят зоопарки? Слишком много Python'ов.",
    "Что говорит программист, когда видит баг? 'Hello, my old friend!'.",
    "Почему программисты не едят пиццу с ананасами? Исключение: неправильный тип данных.",
    "Что программист делает на рыбалке? Дебажит сеть.",
    "Почему программисты не любят лето? Жара перегревает их процессоры.",
    "Как программист пьет чай? Через функцию 'brew()'.",
    "Почему программисты любят дождь? Потому что это их 'refresh'.",
    "Как программист открывает бутылку? Через метод .open().",
    "Почему программистам нельзя доверять секреты? Потому что они всегда возвращают 'true'.",
    "Что делает программист, когда ему скучно? Генерирует случайные шутки через random().",
    "Почему программист носит шапку? Чтобы закрыть свою голову от утечек данных.",
]

black_humor_jokes = [
    "Почему программист не боится вирусов? Потому что он уже мертв внутри.",
    "Что сказал сервер, когда его выключили? 'Прощайте, мои пакеты...'.",
    "Почему скелет-программист улыбается? Потому что его никто не дебажил.",
    "Почему программисты любят темную тему? Чтобы не было видно их ошибок в коде.",
    "Почему программист отказался от ужина? Потому что его переменная 'appetite' равна null.",
    "Почему программисты не работают на кладбище? Потому что там слишком много 'deadlocks'.",
    "Что сказал программист после blue screen? 'Это мой конец?'.",
    "Почему программист любит тьму? Потому что свет освещает его баги.",
    "Как программист называет свои сны? Stack Overflow.",
    "Почему программист не боится темноты? Потому что он привык к темной теме.",
    "Почему программисты редко улыбаются? Их код работает только без эмоций.",
    "Что делает программист на кладбище? Отправляет запросы к прошлому.",
    "Почему программист любит черный экран? Потому что на нем он видит свое будущее.",
    "Как программист шутит о смерти? 'Ctrl+Alt+Del и перерождение'.",
    "Почему программистам не страшно? Они всегда в режиме дебага.",
    "Почему программист ест только ночью? Потому что он 'вечно в темной теме'.",
    "Что делает программист, если его код умирает? Создает новую ветку жизни.",
    "Как программист справляется с депрессией? Пишет скрипт для устранения чувств.",
    "Почему программисты любят черный юмор? Потому что он соответствует их темной теме.",
]

# Добавление кнопки "Получить анекдот" на панель
@bot.message_handler(commands=['start'])
def send_welcome(message):
    markup = telebot.types.ReplyKeyboardMarkup(resize_keyboard=True)
    button = telebot.types.KeyboardButton("Получить анекдот")
    markup.add(button)
    bot.send_message(message.chat.id, "Привет! Нажмите на кнопку ниже, чтобы начать:", reply_markup=markup)

# Обработчик кнопки "Получить анекдот"
@bot.message_handler(func=lambda message: message.text == "Получить анекдот")
def handle_get_joke(message):
    markup = telebot.types.ReplyKeyboardMarkup(one_time_keyboard=True, resize_keyboard=True)
    markup.add('Обычный юмор', 'Черный юмор')
    bot.send_message(message.chat.id, "Выберите тип анекдота:", reply_markup=markup)

# Обработчик выбора пользователя
@bot.message_handler(func=lambda message: message.text in ['Обычный юмор', 'Черный юмор'])
def send_chosen_joke(message):
    if message.text == 'Обычный юмор':
        joke = random.choice(regular_jokes)
    else:
        joke = random.choice(black_humor_jokes)
    
    bot.send_message(message.chat.id, joke)
    # Возвращаем кнопку "Получить анекдот" на панель
    markup = telebot.types.ReplyKeyboardMarkup(resize_keyboard=True)
    button = telebot.types.KeyboardButton("Получить анекдот")
    markup.add(button)
    bot.send_message(message.chat.id, "Нажмите 'Получить анекдот', чтобы выбрать ещё!", reply_markup=markup)

# Обработчик для любых других сообщений
@bot.message_handler(func=lambda message: True)
def echo_all(message):
    bot.reply_to(message, "Нажмите 'Получить анекдот', чтобы получить анекдот!")

# Запуск бота
print("Бот запущен и ожидает сообщения...")
bot.polling(none_stop=True)
